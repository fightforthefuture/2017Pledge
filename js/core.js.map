{"version":3,"sources":["core.js"],"names":["doc","win","detectEscKey","e","code","which","removeEventListener","generateModal","options","dismissModal","overlay","classList","remove","modal","querySelector","setTimeout","firstChild","removeChild","onClose","i","closeModal","contents","body","getElementsByTagName","createElement","undefined","length","add","noFrame","disableOverlayClick","textContent","appendChild","addEventListener","event","modals","document","window","compileFormData","tags","JSON","parse","actionNetworkForm","value","formData","FormData","append","dataset","mothershipTag","stringify","location","href","action","replace","submitForm","handleHelperSuccess","clearTimeout","timer","handleHelperError","submitted","error","errorMessageContainer","errorMessage","errorMessageInfo","type","status","statusText","loadHelperResponse","submission","preventDefault","XMLHttpRequest","modalCopyNode","querySelectorAll","open","getAttribute","send","fireThankYouModal","handleRadio","currentTarget","control","checked","modalForm","shareThis","cloneNode","modalContent","upperContent","modalHeadline","modalCopy","lowerContent","twitter","getElementById","facebook","labels","getTimeRemaining","since","Date","launch","remaining","deadline","remainingDays","Math","floor","ceil","pluralDays","days","time","sideShareButtons","form","formBottom","offsetTop","clientHeight","wrapper","scrollY","util","parseQueryString","queryString","search","queryObject","substr","pairs","split","ref","tagList","push"],"mappings":"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","file":"core.js","sourcesContent":["/**\n *\n * @source: https://github.com/fightforthefuture\n *\n * @licstart  The following is the entire license notice for the\n *  JavaScript code in this page.\n *\n * Copyright (C) Fight for the Future\n *\n *\n * The JavaScript code in this page is free software: you can\n * redistribute it and/or modify it under the terms of the GNU\n * General Public License (GNU GPL) as published by the Free Software\n * Foundation, either version 3 of the License, or (at your option)\n * any later version.  The code is distributed WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS\n * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.\n *\n * As additional permission under GNU GPL version 3 section 7, you\n * may distribute non-source (e.g., minimized or compacted) forms of\n * that code without the copy of the GNU GPL normally required by\n * section 4, provided you include this license notice and a URL\n * through which recipients can access the Corresponding Source.\n *\n * @licend  The above is the entire license notice\n * for the JavaScript code in this page.\n *\n */\n\n(function (doc, win) {\n  \"use strict\";\n\n  win.modals = win.modals || {};\n\n  function detectEscKey(e) {\n    if (e.code === 'Escape' || e.which === 27) {\n      win.removeEventListener('keyup', detectEscKey);\n      return true;\n    }\n  }\n\n  function generateModal(options) {\n    /**\n     * Triggers a modal\n     *\n     * @param {node} options.contents - any HTML to be used as modal content\n     * (also accepts array of nodes)\n     * @param {boolean} options.disableOverlayClick - if false (or absent),\n     * function adds event listener to allow dismissal of modal by clicking on\n     * overlay.\n     * @param {boolean} options.noFrame - if true, adds `no-frame` class to\n     * modal content element.\n     * @param {boolean} options.noFrame - a function that will be called when the\n     * modal is closed.\n     * @return {Object} an object with a dismissModal method to close the modal\n     * */\n\n    var\n      i,\n      contents = options.contents,\n      onClose  = options.onClose,\n      body     = doc.getElementsByTagName('body')[0],\n      overlay  = doc.createElement('div'),\n      modal    = doc.createElement('div'),\n      closeModal;\n\n    if (typeof contents === 'object') {\n      if (contents.length === undefined) {\n        contents = [contents];\n      }\n    } else {\n      return false;\n    }\n\n    overlay.classList.add('overlay');\n    modal.classList.add('modal-content', 'visible');\n\n    function dismissModal() {\n      /**\n       * Removes modal from DOM\n       * */\n\n      overlay.classList.remove('visible');\n      modal.classList.remove('visible');\n      doc.querySelector('body').classList.remove('modal-present');\n\n      win.setTimeout(function () {\n        while (modal.firstChild) {\n          modal.removeChild(modal.firstChild);\n        }\n\n        modal.remove();\n        overlay.remove();\n\n        if (typeof options.onClose === 'function') options.onClose();\n      }, 420);\n    }\n\n    if (options.noFrame) {\n      modal.classList.add('no-frame');\n    }\n\n    if (!options.disableOverlayClick) {\n      closeModal = doc.createElement('button');\n      closeModal.classList.add('close-modal');\n      closeModal.textContent = '\\u00D7';\n      modal.appendChild(closeModal);\n      closeModal.addEventListener('click', dismissModal);\n      overlay.addEventListener('click', dismissModal);\n    }\n\n    for (i = 0; i < contents.length; i++) {\n      modal.appendChild(contents[i]);\n    }\n\n    body.appendChild(overlay);\n    body.appendChild(modal);\n    doc.querySelector('body').classList.add('modal-present');\n\n    win.setTimeout(function () {\n      overlay.classList.add('visible');\n    }, 50);\n\n    win.addEventListener('keyup', function(event) {\n      if (detectEscKey(event)) dismissModal();\n    });\n\n\t\treturn {\n      dismissModal: dismissModal\n    };\n  }\n\n  win.modals.generateModal = generateModal;\n}(document, window));\n\n(function (doc, win) {\n  \"use strict\";\n\n  var actionNetworkForm = doc.getElementById('action-network-form');\n  var submitted = false;\n  var modal;\n  var timer;\n\n  function compileFormData() {\n    /**\n     * Compiles FormData to send off to mothership queue\n     *\n     * @return {FormData} formData\n     * */\n\n    var tags = JSON.parse(actionNetworkForm['signature[tag_list]'].value);\n    var formData = new FormData();\n\n    formData.append('guard', '');\n    formData.append('hp_enabled', true);\n    formData.append('org', 'fftf');\n    formData.append('tag', actionNetworkForm.dataset.mothershipTag);\n    formData.append('an_tags', JSON.stringify(tags));\n    formData.append('an_url', win.location.href);\n    formData.append('an_petition', actionNetworkForm.action.replace(/\\/signatures\\/?/, ''));\n    formData.append('member[first_name]', actionNetworkForm['signature[first_name]'].value);\n    formData.append('member[email]', actionNetworkForm['signature[email]'].value);\n\n    if (actionNetworkForm['signature[tech_worker]'].value !== '') {\n      formData.append('member[tech_worker]', actionNetworkForm['signature[tech_worker]'].value === 'yes' ? true : false);\n\n      if (actionNetworkForm['signature[employer]'].value !== '') {\n        formData.append('member[employer]', actionNetworkForm['signature[employer]'].value);\n      }\n    }\n\n    return formData;\n  }\n\n  function submitForm(event) {\n    /**\n     * Submits the form to ActionNetwork or Mothership-Queue\n     *\n     * @param {event} event - Form submission event\n     * */\n\n    if (event) event.preventDefault();\n    \n    // If form has already been submitted, return early.\n    if (submitted) return;\n\n    // Start form submission.\n    submitted = true;\n\n    var submission = new XMLHttpRequest();\n\n    var modalCopyNode = doc.querySelectorAll('.modal-content .copy');\n    if (modalCopyNode.length) modalCopyNode[0].textContent = 'Thanks for signing!';\n\n    function handleHelperSuccess() {\n      clearTimeout(timer);\n      win.removeEventListener('beforeunload', submitForm);\n    }\n\n    function handleHelperError(e) {\n      /**\n       * Figures out what to say at just the right moment\n       * @param {event|XMLHttpRequest} e - Might be an event, might be a response\n       * from an XMLHttpRequest\n       * */\n\n      modal.dismissModal();\n\n      // Form submission failed, allow new attempt.\n      submitted = false;\n\n      var\n        error = e || {},\n        errorMessageContainer = doc.createElement('div'),\n        errorMessage = doc.createElement('h2'),\n        errorMessageInfo = doc.createElement('p');\n\n      errorMessage.textContent = 'Something went wrong';\n\n      if (error.type) {\n        errorMessageInfo.textContent = 'There seems to be a problem somewhere in between your computer and our server. Might not be a bad idea to give it another try.';\n      } else if (error.status) {\n        errorMessageInfo.textContent = '(the nerdy info is that the server returned a status of \"' + error.status + '\" and said \"' + error.statusText + '\".)'\n      } else {\n        errorMessageInfo.textContent = 'this seems to be a weird error. the nerds have been alerted.';\n      }\n\n      errorMessageContainer.appendChild(errorMessage);\n      errorMessageContainer.appendChild(errorMessageInfo);\n\n      win.modals.generateModal({contents: errorMessageContainer});\n    }\n\n    function loadHelperResponse() {\n      /**\n       * Does the thing after we get a response from the API server\n       * */\n\n      if (submission.status >= 200 && submission.status < 400) {\n        handleHelperSuccess();\n      } else {\n        handleHelperError(submission);\n      }\n    }\n\n    submission.open(actionNetworkForm.getAttribute('method'), 'https://queue.fightforthefuture.org/action', true);\n    submission.addEventListener('error', handleHelperError);\n    submission.addEventListener('load', loadHelperResponse);\n    submission.send(compileFormData());\n  }\n\n  function fireThankYouModal(event) {\n    event.preventDefault();\n\n    // New signup from home page form, reset submitted status.\n    submitted = false;\n\n    var modalForm = actionNetworkForm.cloneNode(true);\n    modalForm.classList.remove('dissolve', 'stuck');\n    modalForm.querySelectorAll('fieldset.signature')[0].classList.add('hidden');\n    modalForm.querySelectorAll('fieldset.tech-worker')[0].classList.remove('hidden');\n\n    var modalContent = doc.createElement('div');\n    var upperContent = doc.createElement('div');\n    upperContent.classList.add('upper');\n\n    var modalHeadline = doc.createElement('h1');\n    modalHeadline.textContent = 'Thank you!';  \n    upperContent.appendChild(modalHeadline);\n\n    var modalCopy = doc.createElement('p');\n    modalCopy.classList.add('copy');\n    modalCopy.textContent = \"We'll send your signature along, but one more thing first:\";\n    upperContent.appendChild(modalCopy);\n\n    var lowerContent = doc.createElement('div');\n    lowerContent.classList.add('lower');\n    lowerContent.appendChild(modalForm);\n\n    var shareThis = doc.querySelectorAll('.share-this')[0].cloneNode();\n\n    var twitter = doc.getElementById('footer-tweet').cloneNode();\n    twitter.textContent = 'Share on Twitter';\n    shareThis.appendChild(twitter);\n\n    var facebook = doc.getElementById('footer-share').cloneNode();\n    facebook.textContent = 'Share on Facebook';\n    shareThis.appendChild(facebook);\n\n    lowerContent.appendChild(shareThis);\n\n    function handleRadio(event) {\n      event.currentTarget.control.checked = true;\n\n      modalForm.querySelectorAll('fieldset.tech-worker')[0].classList.add('hidden');\n\n      if (event.currentTarget.control.value === 'yes') {\n        // Ask for tech industry employer before submitting.\n        modalForm.querySelectorAll('fieldset.employer')[0].classList.remove('hidden');\n\n        // Setup event listener for emplyoer submit button.\n        modalForm.addEventListener('submit', function(event) {\n          event.preventDefault();\n\n          modalForm.querySelectorAll('fieldset.employer')[0].classList.add('hidden');\n          shareThis.classList.remove('hidden');\n\n          submitForm();\n        });\n      } else {\n        shareThis.classList.remove('hidden');\n\n        // Does not work in tech, submit form now.\n        submitForm();\n      }\n    }\n\n    // Configure tech worker form interaction.\n    var labels = modalForm.querySelectorAll('fieldset.radio label');\n    for (var i = 0; i < labels.length; i++) {\n      labels[i].addEventListener('click', handleRadio);\n    }\n\n    modalContent.appendChild(upperContent);\n    modalContent.appendChild(lowerContent);\n\n    modal = win.modals.generateModal({\n      contents: modalContent,\n      onClose: submitForm\n    });\n\n    // Submit form after two minutes if it has not already been submitted.\n    timer = setTimeout(function() {\n      submitForm();\n    }, 120000);\n\n    win.addEventListener('beforeunload', submitForm);\n  }\n\n  actionNetworkForm.addEventListener('submit', fireThankYouModal);\n})(document, window);\n\n(function () {\n  \"use strict\";\n\n  var launch = new Date('November 1, 2017');\n  var deadline = new Date('November 6, 2018');\n\n  var since = document.getElementById('days-since');\n  var remaining = document.getElementById('days-remaining');\n\n  function getTimeRemaining() {\n    var since = new Date() - launch;\n    var remaining = deadline - new Date();\n    var remainingDays = Math.floor( remaining / (1000 * 60 * 60 * 24) );\n\n    return {\n      'since': Math.ceil( since / (1000 * 60 * 60 * 24) ),\n      'remaining': remainingDays > 0 ? remainingDays : 0\n    };\n  }\n\n  function pluralDays(days) {\n    return (days === 1) ? 'day' : 'days';\n  }\n\n  var time = getTimeRemaining();\n  since.textContent = time.since + ' ' + pluralDays(time.since);\n  remaining.textContent = time.remaining + ' ' + pluralDays(time.remaining);\n})();\n\n(function (doc, win) {\n  \"use strict\";\n\n  var sideShareButtons = doc.getElementById('fixed-side-social-container');\n  var form = doc.getElementById('action-network-form');\n  var formBottom = form.offsetTop + form.clientHeight;\n  var wrapper = doc.querySelectorAll('.form-wrapper')[0];\n\n  win.addEventListener('scroll', function() {\n    // Fixed side social container\n    if (win.scrollY > doc.querySelector('header').offsetTop) {\n      sideShareButtons.classList.add('fade-in');\n    } else {\n      sideShareButtons.classList.remove('fade-in')\n    }\n\n    // Sticky form\n    if (win.scrollY >= formBottom) {\n      form.classList.add('stuck');\n      wrapper.classList.add('stuck');\n    } else {\n      form.classList.remove('stuck');\n      wrapper.classList.remove('stuck');\n    }\n  });\n\n  var util = {\n    parseQueryString: function() {\n      var queryString = window.location.search;\n      var queryObject = {};\n\n      if (queryString[0] === '?') {\n        queryString = queryString.substr(1);\n      }\n\n      var pairs = queryString.split('&');\n      var i = pairs.length;\n\n      while (i--) {\n        queryObject[pairs[i].split('=')[0]] = pairs[i].split('=')[1];\n      }\n\n      return queryObject;\n    }\n  };\n\n  var ref = util.parseQueryString();\n\n  if (ref.ref) {\n    var tagList = form['signature[tag_list]'].value;\n    if (tagList) {\n      tagList = JSON.parse(tagList);\n      tagList.push('from-' + ref.ref);\n      form['signature[tag_list]'].value = JSON.stringify(tagList);\n    }\n  }\n})(document, window);\n\n//# sourceMappingURL=core.js.map"]}