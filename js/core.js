/**
 *
 * @source: https://github.com/fightforthefuture
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in this page.
 *
 * Copyright (C) Fight for the Future
 *
 *
 * The JavaScript code in this page is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in this page.
 *
 */
!function(a,b){"use strict";function c(a){if("Escape"===a.code||27===a.which)return b.removeEventListener("keyup",c),!0}function d(d){function e(){j.classList.remove("visible"),k.classList.remove("visible"),a.querySelector("body").classList.remove("modal-present"),b.setTimeout(function(){for(;k.firstChild;)k.removeChild(k.firstChild);k.remove(),j.remove(),"function"==typeof d.onClose&&d.onClose()},420)}var f,g,h=d.contents,i=(d.onClose,a.getElementsByTagName("body")[0]),j=a.createElement("div"),k=a.createElement("div");if("object"!=typeof h)return!1;for(void 0===h.length&&(h=[h]),j.classList.add("overlay"),k.classList.add("modal-content","visible"),d.noFrame&&k.classList.add("no-frame"),d.disableOverlayClick||(g=a.createElement("button"),g.classList.add("close-modal"),g.textContent="Ã—",k.appendChild(g),g.addEventListener("click",e),j.addEventListener("click",e)),f=0;f<h.length;f++)k.appendChild(h[f]);return i.appendChild(j),i.appendChild(k),a.querySelector("body").classList.add("modal-present"),b.setTimeout(function(){j.classList.add("visible")},50),b.addEventListener("keyup",function(a){c(a)&&e()}),{dismissModal:e}}b.modals=b.modals||{},b.modals.generateModal=d}(document,window),function(a,b){"use strict";function c(){var a=JSON.parse(h["signature[tag_list]"].value),c=new FormData;return c.append("guard",""),c.append("hp_enabled",!0),c.append("org","fftf"),c.append("tag",h.dataset.mothershipTag),c.append("an_tags",JSON.stringify(a)),c.append("an_url",b.location.href),c.append("an_petition",h.action.replace(/\/signatures\/?/,"")),c.append("member[first_name]",h["signature[first_name]"].value),c.append("member[email]",h["signature[email]"].value),""!==h["signature[tech_worker]"].value&&(c.append("member[tech_worker]","yes"===h["signature[tech_worker]"].value),""!==h["signature[employer]"].value&&c.append("member[employer]",h["signature[employer]"].value)),c}function d(e){function j(){clearTimeout(g),b.removeEventListener("beforeunload",d)}function k(c){f.dismissModal(),i=!1;var d=c||{},e=a.createElement("div"),g=a.createElement("h2"),h=a.createElement("p");g.textContent="Something went wrong",d.type?h.textContent="There seems to be a problem somewhere in between your computer and our server. Might not be a bad idea to give it another try.":d.status?h.textContent='(the nerdy info is that the server returned a status of "'+d.status+'" and said "'+d.statusText+'".)':h.textContent="this seems to be a weird error. the nerds have been alerted.",e.appendChild(g),e.appendChild(h),b.modals.generateModal({contents:e})}function l(){m.status>=200&&m.status<400?j():k(m)}if(e&&e.preventDefault(),!i){i=!0;var m=new XMLHttpRequest,n=a.querySelectorAll(".modal-content .copy");n.length&&(n[0].textContent="Thanks for signing!"),m.open(h.getAttribute("method"),"https://queue.fightforthefuture.org/action",!0),m.addEventListener("error",k),m.addEventListener("load",l),m.send(c())}}function e(c){function e(a){a.currentTarget.control.checked=!0,j.querySelectorAll("fieldset.tech-worker")[0].classList.add("hidden"),"yes"===a.currentTarget.control.value?(j.querySelectorAll("fieldset.employer")[0].classList.remove("hidden"),j.addEventListener("submit",function(a){a.preventDefault(),j.querySelectorAll("fieldset.employer")[0].classList.add("hidden"),p.classList.remove("hidden"),d()})):(p.classList.remove("hidden"),d())}c.preventDefault(),i=!1;var j=h.cloneNode(!0);j.classList.remove("dissolve","stuck"),j.querySelectorAll("fieldset.signature")[0].classList.add("hidden"),j.querySelectorAll("fieldset.tech-worker")[0].classList.remove("hidden");var k=a.createElement("div"),l=a.createElement("div");l.classList.add("upper");var m=a.createElement("h1");m.textContent="Thank you!",l.appendChild(m);var n=a.createElement("p");n.classList.add("copy"),n.textContent="We'll send your signature along, but one more thing first:",l.appendChild(n);var o=a.createElement("div");o.classList.add("lower"),o.appendChild(j);var p=a.querySelectorAll(".share-this")[0].cloneNode(),q=a.getElementById("footer-tweet").cloneNode();q.textContent="Share on Twitter",p.appendChild(q);var r=a.getElementById("footer-share").cloneNode();r.textContent="Share on Facebook",p.appendChild(r),o.appendChild(p);for(var s=j.querySelectorAll("fieldset.radio label"),t=0;t<s.length;t++)s[t].addEventListener("click",e);k.appendChild(l),k.appendChild(o),f=b.modals.generateModal({contents:k,onClose:d}),g=setTimeout(function(){d()},12e4),b.addEventListener("beforeunload",d)}var f,g,h=a.getElementById("action-network-form"),i=!1;h.addEventListener("submit",e)}(document,window),function(){"use strict";function a(){var a=new Date-c,b=d-new Date,e=Math.floor(b/864e5);return{since:Math.ceil(a/864e5),remaining:e>0?e:0}}function b(a){return 1===a?"day":"days"}var c=new Date("November 1, 2017"),d=new Date("November 6, 2018"),e=document.getElementById("days-since"),f=document.getElementById("days-remaining"),g=a();e.textContent=g.since+" "+b(g.since),f.textContent=g.remaining+" "+b(g.remaining)}(),function(a,b){"use strict";var c=a.getElementById("fixed-side-social-container"),d=a.getElementById("action-network-form"),e=d.offsetTop+d.clientHeight,f=a.querySelectorAll(".form-wrapper")[0];b.addEventListener("scroll",function(){b.scrollY>a.querySelector("header").offsetTop?c.classList.add("fade-in"):c.classList.remove("fade-in"),b.scrollY>=e?(d.classList.add("stuck"),f.classList.add("stuck")):(d.classList.remove("stuck"),f.classList.remove("stuck"))});var g={parseQueryString:function(){var a=window.location.search,b={};"?"===a[0]&&(a=a.substr(1));for(var c=a.split("&"),d=c.length;d--;)b[c[d].split("=")[0]]=c[d].split("=")[1];return b}},h=g.parseQueryString();if(h.ref){var i=d["signature[tag_list]"].value;i&&(i=JSON.parse(i),i.push("from-"+h.ref),d["signature[tag_list]"].value=JSON.stringify(i))}}(document,window);
//# sourceMappingURL=core.js.map